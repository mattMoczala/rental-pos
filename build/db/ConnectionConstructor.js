"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var mongoose=require("mongoose"),logger_1=require("../logger"),ConnectionConstrustor=function(){function o(o,n){this.authInfo=o,this.hostname=n,this._connect()}return o.prototype.renew=function(){this.close(),this._connect()},o.prototype.close=function(){mongoose.disconnect(function(){(0,logger_1.logAction)("Disconnected from database.","info")})},o.prototype._connect=function(){var t=this;mongoose.connect("mongodb://".concat(this.hostname),this.authInfo).then(function(){var o=t.authInfo.dbName,n=t.authInfo.user;(0,logger_1.logAction)("Connected to mongoDB ".concat(o,", as user ").concat(n),"info")}).catch(function(o){(0,logger_1.logAction)("DB connection error","error"),console.log(o),process.exit(1)})},o}();exports.default=ConnectionConstrustor;